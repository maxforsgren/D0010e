package event;

import simulator.*;
import state.*;

public class PickingEvent extends Event {
		private StoreState state;
		private Customer c;

	public PickingEvent(StoreState state, EventQueue queue, Customer c) {
		this.c = c;
		this.state = state;
		this.queue = queue;
		this.time = state.getPickingTime();
	}
	
	public void execute() {
		
		//update state
		state.updateTime(time);
		state.setRecentCustomer(c);
		state.setRecentEvent("Plock");
		
		//1. Kolla om det finns lediga kassor.
		//2. antalet lediga kassor minskar med 1.
		//3. en framtida betalningshändelse läggs till i händelsekön.
		if(state.getFreeCheckouts() > 0) {
			state.addCheckoutCustomer();
			queue.add(new PaymentEvent(state, queue, c));
		//Om kassorna är fulla lägger vi till en kund till kassakön.
		} else {
			state.addToCheckoutLine(c);
			state.addTotalNoQueue();
		}
		
		//Display view
		state.updateState();
		
		
	}

	public double getEventTime() {
		return this.time;
	}

}
